import { a } from './chunk-2BYXGS2I.js';
import { p, N, n, d, o, $ as $$1, g, c, h as h$1, W as W$1, Z as Z$1, _, i, Y as Y$1, X } from './chunk-LJL6FTVN.js';
import { j as j$1, h, e, H as H$1, z } from './chunk-2LDABZU6.js';

new URL(import.meta.url).pathname; 
j$1();h();j$1();h();p();var u=e(a(),1),re=e(N(),1);n();d();j$1();h();var I=e(a(),1),q=(e,n,o)=>Math.min(Math.max(e,n),o);function Y(e,n,o=W(n)){e=q(e,0,n.length);let i=0,g=o.length;if(g===0)return I.Position.create(0,e);for(;i<=g;){let E=Math.floor((i+g)/2),F=o[E];if(F===e)return I.Position.create(E,0);e>F?i=E+1:g=E-1;}let D=i-1;return I.Position.create(D,e-o[D])}function M(e,n,o=W(n)){if(e.line>=o.length)return n.length;if(e.line<0)return 0;let i=o[e.line],g=e.line+1<o.length?o[e.line+1]:n.length;return q(g,i,i+e.character)}function W(e){let n=[],o=!0;for(let i=0;i<e.length;i++){o&&(n.push(i),o=!1);let g=e.charAt(i);o=g==="\r"||g===`
`,g==="\r"&&i+1<e.length&&e.charAt(i+1)===`
`&&i++;}return o&&e.length>0&&n.push(e.length),n}function Z(e,n){return n.substring(M(e.start,n),M(e.end,n))}j$1();h();var V=class{constructor(){this.version=0;}getTextLength(){return this.getText().length}positionAt(n){return Y(n,this.getText(),this.getLineOffsets())}offsetAt(n){return M(n,this.getText(),this.getLineOffsets())}getLineOffsets(){return this.lineOffsets||(this.lineOffsets=W(this.getText())),this.lineOffsets}get uri(){return this.getURL()}get lineCount(){return this.getText().split(/\r?\n/).length}},j=class extends V{update(n,o,i){this.lineOffsets=void 0;let g=this.getText();this.setText(g.slice(0,o)+n+g.slice(i));}};H$1();j$1();h();var l=e(N(),1);function ee(){let e=[];[[0,l.SemanticTokenModifiers.declaration],[1,l.SemanticTokenModifiers.static],[2,l.SemanticTokenModifiers.async],[3,l.SemanticTokenModifiers.readonly],[4,l.SemanticTokenModifiers.defaultLibrary],[5,"local"]].forEach(([o,i])=>e[o]=i);let n=[];return [[0,l.SemanticTokenTypes.class],[1,l.SemanticTokenTypes.enum],[2,l.SemanticTokenTypes.interface],[3,l.SemanticTokenTypes.namespace],[4,l.SemanticTokenTypes.typeParameter],[5,l.SemanticTokenTypes.type],[6,l.SemanticTokenTypes.parameter],[7,l.SemanticTokenTypes.variable],[8,l.SemanticTokenTypes.enumMember],[9,l.SemanticTokenTypes.property],[10,l.SemanticTokenTypes.function],[11,l.SemanticTokenTypes.method],[12,l.SemanticTokenTypes.event]].forEach(([o,i])=>n[o]=i),{tokenModifiers:e,tokenTypes:n}}function ue(e){switch(e){case o.ScriptElementKind.primitiveType:case o.ScriptElementKind.keyword:return u.CompletionItemKind.Keyword;case o.ScriptElementKind.constElement:return u.CompletionItemKind.Constant;case o.ScriptElementKind.letElement:case o.ScriptElementKind.variableElement:case o.ScriptElementKind.localVariableElement:case o.ScriptElementKind.alias:return u.CompletionItemKind.Variable;case o.ScriptElementKind.memberVariableElement:case o.ScriptElementKind.memberGetAccessorElement:case o.ScriptElementKind.memberSetAccessorElement:return u.CompletionItemKind.Field;case o.ScriptElementKind.functionElement:return u.CompletionItemKind.Function;case o.ScriptElementKind.memberFunctionElement:case o.ScriptElementKind.constructSignatureElement:case o.ScriptElementKind.callSignatureElement:case o.ScriptElementKind.indexSignatureElement:return u.CompletionItemKind.Method;case o.ScriptElementKind.enumElement:return u.CompletionItemKind.Enum;case o.ScriptElementKind.moduleElement:case o.ScriptElementKind.externalModuleName:return u.CompletionItemKind.Module;case o.ScriptElementKind.classElement:case o.ScriptElementKind.typeElement:return u.CompletionItemKind.Class;case o.ScriptElementKind.interfaceElement:return u.CompletionItemKind.Interface;case o.ScriptElementKind.warning:case o.ScriptElementKind.scriptElement:return u.CompletionItemKind.File;case o.ScriptElementKind.directory:return u.CompletionItemKind.Folder;case o.ScriptElementKind.string:return u.CompletionItemKind.Constant}return u.CompletionItemKind.Property}function te(e){return e?e.map(n=>n.text).join(""):""}function ge(e){let n=`*@${e.name}*`;if(e.name==="param"&&e.text){let[o,...i]=e.text;n+=`\`${o.text}\``,i.length>0&&(n+=` \u2014 ${i.map(g=>g.text).join(" ")}`);}else Array.isArray(e.text)?n+=` \u2014 ${e.text.map(o=>o.text).join(" ")}`:e.text&&(n+=` \u2014 ${e.text}`);return n}function ne(e,n){let o=e.positionAt(n.start),i=e.positionAt(n.start+n.length);return {start:o,end:i}}var $=class extends j{constructor(o,i,g,D){super();this._uri=o;this.languageId=i;this.version=g;this.content=D;}get uri(){return this._uri}getFilePath(){return this.uri.replace("file:///","/")}getText(o){return o?Z(o,this.content):this.content}getURL(){return new URL(this.uri).toString()}setText(o){this.content=o;}},H="/";o.matchFiles;var ie=({connection:e})=>{let n={},i$1=(()=>{var r=new Map;let a=0;function m(s){var c$1=c.readFile(s,"utf-8");if(c$1)return o.ScriptSnapshot.fromString(c$1.toString())}let h=()=>o.parseJsonConfigFileContent(o.readConfigFile("/tsconfig.json",o.sys.readFile).config,o.sys,"/",{allowJs:!0,baseUrl:".",allowNonTsExtensions:!0,target:o.ScriptTarget.Latest,noEmit:!0,declaration:!1,skipLibCheck:!0},"/tsconfig.json"),p={...h().options,allowJs:!0,baseUrl:".",allowNonTsExtensions:!0,target:o.ScriptTarget.Latest,noEmit:!0,declaration:!1,skipLibCheck:!0},d=o.createCompilerHost(p),x={log:s=>console.debug(`[ts] ${s}`),getCompilationSettings:()=>h().options,getScriptFileNames(){return Array.from(g("/")).filter(s=>!s.includes("/node_modules/")&&(s.endsWith(".ts")||s.endsWith(".tsx")||s.endsWith(".js")||s.endsWith(".jsx")||s.endsWith(".js")))},getCompilerHost(){return d},writeFile:(s,c$1)=>{o.sys.writeFile(s,c$1,!1),c.writeFile(s,c$1),d.writeFile(s,c$1,!1);},realpath:h$1,getScriptVersion:function(c){return r.get(c)||"0"},getScriptSnapshot:m,getCurrentDirectory(){return H},getDefaultLibFileName:o.getDefaultLibFilePath,fileExists:c.fileExists.bind(c),readFile:(s,c$1)=>c.readFile(s,c$1).toString(),readDirectory(s,c,L,C,J){return d.readDirectory(s,c,L,C,J)},getDirectories:(...s)=>c.getDirectories(...s).filter(c=>!c.includes("/node_modules/")),useCaseSensitiveFileNames:()=>o.sys.useCaseSensitiveFileNames,getScriptKind:function(c){switch(c.split(".").pop().toLowerCase()){case o.Extension.Js:return o.ScriptKind.JS;case o.Extension.Jsx:return o.ScriptKind.JSX;case o.Extension.Ts:return o.ScriptKind.TS;case o.Extension.Tsx:return o.ScriptKind.TSX;case o.Extension.Json:return o.ScriptKind.JSON;default:return o.ScriptKind.Unknown}},resolveModuleNameLiterals:d.resolveModuleNameLiterals,getProjectVersion:()=>a.toString(),getNewLine:()=>o.sys.newLine};return {...o.createLanguageService(x),updateFile:function(s,c){return this.createFile(s,c)},createFile:function(s,c$1){r.set(s,(r.get(s)||0)+1),c.writeFile(s,c$1),d.writeFile(s,c$1,!1),a++,W$1(()=>Z$1(s,c$1),100);}}})();_((r,a)=>{i$1.updateFile(i(r),a);}),globalThis.localStorage=globalThis.localStorage??{},e.onInitialize(()=>({capabilities:{textDocumentSync:{openClose:!0,change:re.TextDocumentSyncKind.Full,save:{includeText:!1}},workspaceSymbolProvider:{workDoneProgress:!0},documentFormattingProvider:!0,completionProvider:{resolveProvider:!0,completionItem:{labelDetailsSupport:!0},workDoneProgress:!0,triggerCharacters:[".",'"',"'","`","/","@","<",">","*","#","$","+","^","(","[","@","-",":","|"]},signatureHelpProvider:{triggerCharacters:["(",",","<"],retriggerCharacters:[")"]},semanticTokensProvider:{legend:ee(),range:!0,full:!0},referencesProvider:!0,selectionRangeProvider:!0,linkedEditingRangeProvider:!0,implementationProvider:!0,typeDefinitionProvider:!0,inlayHintProvider:!0,callHierarchyProvider:!0,hoverProvider:!0}}));function g$1(r,a){i$1.updateFile(r,a);}function D(r,a,m){let h=i$1.getCompletionsAtPosition(a,r,{includeCompletionsForImportStatements:!0,includeCompletionsForModuleExports:!0,triggerKind:m.context.triggerKind,includeCompletionsWithInsertText:!0,includePackageJsonAutoImports:"on",includeCompletionsWithSnippetText:!0,useLabelDetailsInCompletionEntries:!0,allowIncompleteCompletions:!1});return {items:h.entries.filter(p=>p!=null).map(p=>({...p,label:p.name,kind:ue(p.kind)})),isIncomplete:h.isIncomplete}}function E(r,a){return i$1.getQuickInfoAtPosition(a,r)}function F(r){if(!i$1)return;let a=i$1.getSyntacticDiagnostics(r),m=i$1.getSemanticDiagnostics(r),h=i$1.getSuggestionDiagnostics(r),p=[].concat(a,m,h).reduce((d,x)=>{let P=s=>{if(typeof s=="string")return [s];let c=[],L=C=>{c.push(C.messageText),C.next&&C.next.forEach(J=>{L(J);});};return L(s),c},w=[u.DiagnosticSeverity.Warning,u.DiagnosticSeverity.Error,u.DiagnosticSeverity.Information,u.DiagnosticSeverity.Hint];return P(x.messageText).forEach(s=>{d.push({range:ne(n[`file://${r}`],x),message:s,source:x?.source||"ts",severity:w[x.category]});}),d},[]);e.sendDiagnostics({uri:`file://${r}`,diagnostics:p});}e.onDidOpenTextDocument(r=>{let a=i(r.textDocument.uri),m=r.textDocument.text;n[r.textDocument.uri]||(n[r.textDocument.uri]=new $(r.textDocument.uri,r.textDocument.languageId,r.textDocument.version,m)),H=z(a),g$1(a,m),F(a),Z$1(a,m);}),e.onDidChangeTextDocument(r=>{let a=i(r.textDocument.uri),m=r.contentChanges[0].text;n[r.textDocument.uri].update(m,0,m.length),n[r.textDocument.uri].version++,H!==z(a)&&(H=z(a)),g$1(a,m),F(a),Z$1(a,m);}),e.onCompletion(r=>{let a=i(r.textDocument.uri);return D(n[r.textDocument.uri].offsetAt(r.position),a,r)}),e.onHover(Y$1(async({textDocument:r,position:a})=>{let m=i(r.uri),h=n[r.uri],p=E(h.offsetAt(a),m);if(!p)return;let d=te(p.documentation),x=p.tags?p.tags.map(w=>ge(w)).join(`  

`):"",P=te(p.displayParts);return X({range:ne(n[r.uri],p.textSpan),contents:[{language:"typescript",value:"```typescript\n"+P+"\n```\n"},{language:"typescript",value:d+(x?`

`+x:"")}]})},1e3)),e.listen();};var v=e(N(),1),se=globalThis,me=(0, v.createConnection)(new v.BrowserMessageReader(se),new v.BrowserMessageWriter(se)),et=()=>$$1(ie,me,"TypeScript");

export { et as TypeScriptWorker };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=tsWorker.js.map